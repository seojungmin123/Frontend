# 정규 표현식(Regular Expression)

[1. 방식](#1-방식) <br>
[2. 옵션(플래그)](#2-옵션플래그) <br>
[3. 정규식 패턴/기호](#3-정규식-패턴기호) <br>
[4. 정규식 메서드](#4-정규식-메서드) <br>
[5. 연습](#5-연습)

문자열에서 특정 내용을 찾거나 대체 또는 발췌하는데 사용

- 각각 다른 포맷의 전화번호 데이터를 추출해야할 때
- 입력받은 이메일, 휴대폰번호, IP주소 등이 올바른지 검증해야할 때
- 문자열에 포함된 공백이나 특수문자를 조건에 따라 제거하고 싶을 때

<br>

## 1. 방식

- 생성자 함수 방식
```js
new RegExp('표현식','옵션(플래그)')

let regexp1 = new RegExp('hi','');
regexp1 = new RegExp('hi','gi');
```

- 리터럴 표기 방식 (더 많이 씀)
```js
/표현식/옵션

let regexp2 = /hi/;
regexp2 = /hi/gi;
```

<br>

## 2. 옵션(플래그)
옵션|뜻|설명|
---|---|---|
i|Ignore Case|대소문자를 구별하지 않음
g|global|문자열 내의 모든 패턴 검색
m|Multi Line|문자열의 행이 바뀌더라도 검색
s|  |.(모든 문자 정규식)이 개행 문자 \n도 포함하도록
u|unicode|유니코드 전체를 지원
y|sticky|문자 내 특정 위치에서 검색을 진행 

<br>

### g : 전역검색
- 전역 검색 플래그가 없는 경우, 최초 검색 결과 한번만 반환
- 전역 검색 플래그가 있는 경우, 모든 검색 결과를 배열로 반환
```js
const str = "abcabc";

console.log(str.match(/a/)); // ["a", index: 0, input: "abcabc", groups: undefined]

console.log(str.match(/a/g)); // ["a", "a"]
```

<br>

### m : 줄바꿈 검색
- 여러 줄의 문자열에서 필터링 해야 할때 사용
- 입력 시작(^) 앵커나 입력 종료($) 앵커는 전체 문자열이 아닌 각 줄별로 대응되기 때문에 <br>
여러줄을 검색해야한다면 m 플래그를 사용
```js
const str = "Hello World and\nPower Hello?\nPower Overwhelming!!";
/*
Hello World and
Power Hello?
Power Overwhelming!!
*/

// Hello 단어로 시작하는지 검사 (^ 문자는 문장 시작점을 의미)
str.match(/^Hello/); // ["Hello"]
// 첫번째 줄은 잘 찾음

// Power 단어로 시작하는지 검사 (^ 문자는 문장 시작점을 의미)
str.match(/^Power/); // null
// 다음 줄은 검색 X

// m 플래그를 사용해 개행되는 다음 줄도 검색
str.match(/^Power/m); // ['Power']

// g 플래그와 혼합 사용하여 세번째 줄도 검색
str.match(/^Power/gm); // ['Power', 'Power']
```

<br>

### i : 대소문자 구분 없음
- 정규식은 기본적으로 대소문자를 구분(Case sensitive)
- 대신 i 플래그를 사용해 대소문자를 구분하지 않을수 있음

```js
const str = "abcABC";

str.match(/a/gi); // ["a", "A"]
```

<br>

## 3. 정규식 패턴/기호

### 정규식 특정 문자,숫자 매칭 패턴

패턴|의미|
---|---|
a-zA-Z|영어알파벳(-으로 범위지정)
ㄱ-ㅎ가-힣|한글 문자(-으로 범위지정)
0-9|숫자(-으로 범위지정)
.|모든 문자열(숫자, 한글, 영어, 특수기호, 공백)<br>줄바꿈X
\d|숫자
\D|숫자가 아닌 것
\w|밑줄 문자를 포함한 영숫자 문자에 대응<br>[A-Za-z0-9_] 와 동일
\s|space 공백
\S|space 공백이 아닌 것
\특수기호|\\* \\^ \\% \\! \\? ... 등등
\b|63개 문자(영어 대소문자 52개 + 숫자 10개 + _(언더바))가 아닌 나머지 문자에 일치하는 경계
\B|63개 문자에 일치하는 경계
\x|16진수 문자에 일치<br>/\x61/ = a
\0|8진수 문자에 일치<br>/\141/ = a
\u|유니코드 문자에 일치<br>/\u0061/ = a
\c|제어(control) 문자에 일치
\f|폼 피드(FF, U+000C) 문자에 일치
\n줄 바꿈(LF, U+000A) 문자에 일치
\r|캐리지 리턴(CR, U+000D) 문자에 일치
\t|탭 (U+0009) 문자에 일치

<br>

### 정규식 검색 기준 패턴

기호|의미|
---|---|
\||or
[]|괄호안의 문자들 중 하나
[^문자]|괄호안의 문자를 제외한 것
^문자열|특정 문자열로 시작(시작점)
문자열$|특정 문자열로 끝남(종착점)

<br>

### 정규식 갯수 반복 패턴

기호|의미|
---|---|
?|없거나 or 최대 한개만
*|없거나 or 있거나(여러개)
+|최소 한개 or 여러개
*?|가능한 적은 문자와 일치(0 ~ n)개수
+?|가능한 적은 문자와 일치 (1 ~ n)개수
{n}|n개
{Min,}|최소 Min개 이상
{Min, Max}|최소 Min개 이상, 최대 Max개 이하, {3,5}? == {3}와 동일

<br>

### 정규식 그룹 패턴

기호|의미|
---|---|
()|그룹화 및 캡쳐
(?:패턴)|그룹화(캡쳐 X)
(?=)|앞쪽 일치
(?!)부정 앞쪽 일치
(?<=)뒤쪽 일치
(?<!)부정 뒤쪽 일치

<br>

### 그룹화 
: 소괄호 ()를 사용하여 패턴의 범위를 묶어 반복, 선택 등의 조건을 적용하는 것 <br>

### 캡쳐 
: 그룹화에 묶인 패턴이 일치한 문자열 부분을 따로 빼내어(\1, $1 등으로) 코드에서 재사용하거나 추출할 수 있도록 저장하는 것

<br>

## 4. 정규식 메서드

메서드|설명|
---|---|
정규식.test(문자열)|일치하는 문자열 검사 후 bool값 반환
문자열.match(정규식)|일치하는 문자열의 배열반환. 없으면 null 반환
문자열.replace(정규식,대체문자)|일치하는 문자열 변경(치환)
문자열.search()|일치하는 문자열 검색, 첫번째 문자열의 인덱스 반환. 없으면 -1 반환
정규식.exec("문자열")|정규식을 통해 찾고자 하는 문자열 패턴을 찾고 배열을 반환. 없으면 null 반환
문자열.split(정규식)|일치하는 문자열을 찾고, 문자열을 기준으로 나누어서 배열로 반환.

<br>

## 5. 연습
```js
const str = `
010-1111-1234
Hello_world!.
mmmnnn08@naver.com
hello javascript!
aaa bbbb cccc ddddd eeee ff
hi html
Hi Css.
hello@naver.com
book HTML
books html
안녕하세요 저는 홍길동입니다.
http://localhost:3000
https://www.naver.com
The HI DOG dog cat google email HELLO HTML
2025-11-10
0123456789
0123a987
.`;


//===================== 문자, 숫자 매칭 패턴 =========================

// 1. a-zA-Z (영어)
console.log(str.match(/[a-zA-Z]+/g)); // ['Hello', 'world', 'mmmnnn', ...]

// 2. ㄱ-ㅎ가-힣 (한글)
console.log(str.match(/[ㄱ-ㅎ가-힣]+/g)); // ['안녕하세요', '저는', '홍길동입니다' ]

// 3. 0-9 (범위지정 숫자) {4자리} 4자리 넘는숫자는 4자리까지만 나옴 
console.log(str.match(/[0-3]{4}/g)); // [ '1111', '3000', '0123', '0123' ]

// 4. . (모든 문자)
console.log(str.match(/./g)); // ['0', '1', '0', '-', '1', '1', ...]

// 5. \d (숫자)
console.log(str.match(/\d/g)); // ['0', '1', '0', '1', '1', '1', '1', ...]

// 6. \D (숫자가 아닌 것)
console.log(str.match(/\D/g)); // ['\n', '-',  '-', '\n', 'H', ...]

// 7. \w (영숫자, _ )
console.log(str.match(/\w+/g)); // ['010','1111','1234','Hello', '_','world', ...]

// 8. \s (space 공백)
console.log(str.match(/\s/g)); // ['\n', ' ', ...]

// 9. \S (space 공백이 아닌 것)
console.log(str.match(/\S+/g)); // ['010-1111-1234','Hello_world!.','mmmnnn08@naver.com', ...]

// 10. \특수기호 (이스케이프된 특수 기호)
console.log(str.match(/\-/g)); // [ '-', '-', '-', '-' ]

// 11. \b (단어 경계) 문자와 비 문자의 경계
console.log(str.match(/\b\d{3}\b/g)); // [ '010' ]

// 12. \B (비 단어 경계) 문자와 문자사이, 비문자와 비문자 사이 경계
console.log(str.match(/\Bll\B/g)); // [ 'll', 'll', 'll' ]  ("Hello"  "hello"의 'll' 매칭)

// 13. \x (16진수)
console.log(str.match(/\x68\x69/g)); // [ 'hi' ]

// 14. \u (유니코드)
console.log(str.match(/\u0063\u0061\u0074/g)); // [ 'cat' ]

// 15. \n (줄 바꿈)
console.log(str.match(/\n/g)); // ['\n', '\n', '\n', ...]



//===================== 검색 기준 패턴 =========================

// 1. | (or)
console.log(str.match(/HTML|Css/g)); // [ 'Css', 'HTML', 'HTML' ]

// 2. [] (괄호 안의 문자 중 하나)
console.log(str.match(/[aeiou]/g)); // ['e', 'o', 'o', 'a', 'e', 'o', 'e', 'o','a', 'a', 'i', ...]

// 3. [^문자] (괄호 안의 문자를 제외한 것)
console.log(str.match(/[^0-9\s]/g)); // ['-', '-', 'H', 'e', 'l', 'l', 'o', '_', ...]

// 4. ^문자열 (특정 문자열로 시작, 'm' 플래그 필수)
console.log(str.match(/^010/gm)); // [ '010' ]

// 5. 문자열$ (특정 문자열로 끝남, 'm' 플래그 필수)
console.log(str.match(/html$/gm)); // [ 'html', 'html' ]



//===================== 갯수 반복 패턴 =========================

// 1. ? (없거나 최대 1개)
console.log(str.match(/books?/g)); // [ 'book', 'books' ] (book 또는 books)

// 2. * (없거나 여러개, 길게)
console.log(str.match(/h.*l/gi)); // [ 'Hello_worl', 'hell', 'http://local', 'he HI DOG dog cat google email HELLO HTML', ...] (h와 l 사이 0개 이상, 최대한 길게)

// 3. + (최소 1개 or 여러개, 길게)
console.log(str.match(/a+/g)); // ['a', 'a', 'a', 'aaa', ...] (a가 최소 1개 이상)

// 4. *? (없거나 여러개, 짧게)
console.log(str.match(/h.*?l/gi)); // ['Hel', 'http://l', 'he HI DOG dog cat googl', ...](h와 l 사이 0개 이상, 최소한 짧게)

// 5. +? (최소 1개 or 여러개, 짧게)
console.log(str.match(/l.+?j/g)); // [ 'llo j' ] (l과 j 사이 1개 이상, 최소한 짧게)

// 6. {n} (n개)
console.log(str.match(/d{5}/g)); // [ 'ddddd' ] (d가 정확히 5개)

// 7. {Min,} (최소 Min개 이상)
console.log(str.match(/e{2,}/g)); // [ 'eeee' ] (e가 최소 2개 이상)

// 8. {Min, Max} (최소 Min개, 최대 Max개)
console.log(str.match(/c{3,4}/g)); // [ 'cccc' ] (c가 최소 3개, 최대 4개)



//===================== 그룹 패턴 =========================

// 1. () (그룹화 및 캡쳐)
console.log(str.match(/(\d{3})-(\d{4})-(\d{4})/gm)); // [ '010-1111-1234' ] (전화번호 캡쳐) '010','1111','1234' 로 캡쳐되서 $1 $2 $3 으로 각각 쓸수 있음

// 2. (?:패턴) (그룹화, 캡쳐 X)
console.log(str.match(/(?:https?):\/\/\S+/g)); // [ 'http://localhost:3000', 'https://www.naver.com' ] (프로토콜은 캡쳐 제외)

// 3. (?=) (앞쪽 일치, Lookahead)
console.log(str.match(/dog(?=\scat)/g)); // [ 'dog' ] (뒤에 'cat'이 오는 dog)

// 4. (?!) (부정 앞쪽 일치, Negative Lookahead)
console.log(str.match(/dog(?!\scat)/gi)); // [ 'DOG' ] (뒤에 'cat'이 오지 않는 dog)

// 5. (?<=) (뒤쪽 일치)
console.log(str.match(/(?<=@)naver/g)); // [ 'naver', 'naver' ] (앞에 '@'가 있는 naver)

// 6. (?<!) (부정 뒤쪽 일치, Negative Lookbehind, JS는 'u' 플래그 필요)
console.log(str.match(/(?<!The)HI/g)); // [ 'HI' ] (앞에 'The '가 없는 HI)



//===================== 메서드 =========================

const regex = /html/gi; // html 대소문자 없이 전역 검색

// 1. 정규식.test(문자열) : 일치하는 문자열 검사 후 bool값 반환
console.log(regex.test(str)); // true (HTML 단어가 포함되어 있는가?)

// 2. 문자열.match(정규식) : 일치하는 문자열의 배열 반환. 없으면 null 반환
console.log(str.match(regex)); // html,HTML,html,HTML (모든 'html' 단어 찾기)

// 3. 문자열.replace(정규식, 대체문자) : 일치하는 문자열 변경(치환). 원본 str은 변경되지 않음.
console.log(str.replace(regex, 'CSS')); // hi CSS Hi Css. (html을 CSS로)

// 4. 문자열.search(정규식) : 일치하는 문자열 검색, 첫 번째 문자열의 인덱스 반환. 없으면 -1 반환
console.log(str.search(regex)); // 97 ('html'이 처음 나오는 인덱스)

// 5. 정규식.exec(문자열) : 정규식을 통해 찾고자 하는 문자열 패턴을 찾고 배열을 반환. 없으면 null 반환
const execRegex = /(\d{3})-(\d{4})-(\d{4})/g; // 전화번호 패턴
console.log(execRegex.exec(str));

// 6. 문자열.split(정규식) : 일치하는 문자열을 찾고, 그 문자열을 기준으로 나누어서 배열로 반환.
const email = "mmmnnn08@naver.com";
console.log(email.split(/[@.]/)); // [ 'mmmnnn08', 'naver', 'com' ]

```

<br>

참고
- [https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EC%A0%95%EA%B7%9C%EC%8B%9D-RegExp-%EB%88%84%EA%B5%AC%EB%82%98-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC
]
- [https://spare8433.tistory.com/109]
- [https://fullstack-eun.tistory.com/100]